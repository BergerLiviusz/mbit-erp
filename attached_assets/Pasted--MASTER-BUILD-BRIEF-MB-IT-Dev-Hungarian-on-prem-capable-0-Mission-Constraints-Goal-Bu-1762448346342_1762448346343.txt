üì¶ MASTER BUILD BRIEF ‚Äî MB IT Dev (Hungarian, on-prem capable)

0) Mission & Constraints
	‚Ä¢	Goal: Build a modular, enterprise web application (desktop-packaged & browser) for a financial audit firm (Audit Institute) with CRM, DMS/archiving, OCR pipeline, logistics/inventory (basic), and foundation for future modules (HR, controlling/BI, gy√°rt√°s, ecommerce, online marketing).
	‚Ä¢	Language/locale: All end-user UI, content, and default data in Hungarian. Date/time: Europe/Budapest. Currency: HUF by default.
	‚Ä¢	Deployment modes:
	1.	Desktop app (cross-platform packaged) +
	2.	Local-first browser app (PWA) running entirely on the client when needed.
	‚Ä¢	Compliance anchors (audit-ready):
	‚Ä¢	Documentation & training artifacts present (install/admin/user guides or e-learning).  Ôøº
	‚Ä¢	Support/maintenance & versioning approach documented through the fenntart√°si id≈ëszak.  Ôøº
	‚Ä¢	T√∂rv√©nyi megfelel≈ës√©g + GDPR where personal data are processed.  Ôøº
	‚Ä¢	Integr√°lts√°g, napl√≥z√°s, jogosults√°g-kezel√©s, magyar/angol el√©rhet≈ës√©g, t√°voli el√©r√©s, hibabejelent√©s, adatment√©s/√úBT, el√©rhet≈ës√©g ‚â•96%.  Ôøº
	‚Ä¢	Data ownership: All data remains on customer infrastructure by default (on-prem/in-house operation).

1) Tech Stack (propose & scaffold)
	‚Ä¢	Monorepo with workspaces.
	‚Ä¢	Frontend: React + Vite + TypeScript. State: TanStack Query + Zustand. Forms: React Hook Form + Zod. UI kit: shadcn/ui + Tailwind (HU copy). i18n: i18next (hu as default).
	‚Ä¢	Desktop packaging: Electron + electron-builder (targets: Windows MSI, macOS DMG/ZIP, Linux AppImage). Also generate PWA build.
	‚Ä¢	Backend (local embedded or service):
	‚Ä¢	NestJS (TypeScript) REST + WebSocket.
	‚Ä¢	Prisma ORM.
	‚Ä¢	SQLite for single-user/local; PostgreSQL option for multi-user on-prem.
	‚Ä¢	Search & OCR pipeline: Tesseract (on-device) with Hungarian language pack; prepare adapters for optional cloud OCR.
	‚Ä¢	Document preview: PDF.js, image thumbnails.
	‚Ä¢	Auth & RBAC: JWT (desktop local) or cookie sessions (browser). Roles: User, PowerUser, Admin, Auditor (read-only).
	‚Ä¢	Logging & audit trails: Winston + Prisma middleware, immutable append-only event store. User/session/event logs across all critical business flows to satisfy ‚Äúnapl√≥z√°s‚Äù requirements.  Ôøº
	‚Ä¢	Backups & √úBT: CLI + scheduler for encrypted backups (file + DB), restore workflow, DR checklist; minimal SLA monitor to target ‚â•96% availability.  Ôøº
	‚Ä¢	Security: HTTPS for browser mode, secure IPC in Electron, role-scoped endpoints, field-level PII masking in logs (GDPR).
	‚Ä¢	Testing: Vitest + Playwright (E2E on packaged build).
	‚Ä¢	CI Packaging (Replit): Provide Replit ‚ÄúNix + run‚Äù config to build Electron installers for Win/macOS/Linux and serve a PWA build artifact folder.

2) Global Non-Functional Requirements (NFRs)
	‚Ä¢	Hungarian UX everywhere; use formal business tone in system messages.
	‚Ä¢	Accessibility: WCAG 2.1 AA.
	‚Ä¢	Performance: sub-200ms avg API on local; search across ~50k docs <2s.
	‚Ä¢	Offline-first: PWA uses local IndexedDB cache; background sync when online.
	‚Ä¢	Documentation deliverables:
	‚Ä¢	Telep√≠t√©si/√ºzemeltet≈ëi k√©zik√∂nyv, felhaszn√°l√≥i k√©zik√∂nyv, and a short e-learning outline.  Ôøº
	‚Ä¢	Support pack: ticketing link in app + ‚Äúhiba bejelent√©se‚Äù page.  Ôøº

3) Core Modules & Must-Have Features

A) CRM (√ârt√©kes√≠t√©s & √ºgyf√©lkapcsolat)

Purpose: pipeline & √ºgyf√©l-√©lett√∂rt√©net, kamp√°nyok, aj√°nlat‚Üírendel√©s‚Üísz√°ml√°z√°s √°tad√°s.
Key features (align to mell√©klet):
	‚Ä¢	Kamp√°nymenedzsment alapok: c√©lk√∂z√∂ns√©g sz≈±r√©s, export, visszajelz√©s kezel√©se.  Ôøº
	‚Ä¢	√ârt√©kes√≠t√©si folyamat l√°nc: Aj√°nlat ‚Üí Rendel√©s ‚Üí Sz√°ll√≠t√°s ‚Üí Sz√°ml√°z√°s; adatreuse √©s integr√°ci√≥ logisztika/p√©nz√ºgy fel√©.  Ôøº
	‚Ä¢	Kedvezm√©nykezel√©s: mennyis√©gi, egyedi √°r, √©rt√©khat√°r, id≈ëszaki.  Ôøº
	‚Ä¢	√úgyf√©lt√∂rzs: egyedi azonos√≠t√≥, n√©v, kapcsolattart√≥k, c√≠mek, egyedi jellemz≈ëk; import k√ºls≈ë adatb√°zisb√≥l.  Ôøº
	‚Ä¢	Front office csatorn√°k: legal√°bb 2 (e-mail + chat/IVR/SMS/k√∂z√∂ss√©gi).  Ôøº
	‚Ä¢	Reklam√°ci√≥/ticketing + eszkal√°ci√≥.  Ôøº
	‚Ä¢	Riportok, eml√©keztet≈ëk, napt√°r integr√°ci√≥.
	‚Ä¢	RBAC + napl√≥z√°s minden m≈±veletre.  Ôøº

B) DMS / Iratkezel√©s + Archiv√°l√°s

Purpose: egyes√≠tett, kereshet≈ë iratt√°r; scannelt pap√≠rok digitaliz√°l√°sa, hiteles archiv√°l√°s opci√≥.
Key features:
	‚Ä¢	√ârkeztet√©s & iktat√°s, √ºgyirat √©letciklus (iktat√≥sz√°m, st√°tuszok, hat√°rid≈ëk, felel≈ës).  Ôøº
	‚Ä¢	Elektronikus kezel√©s, t√°rol√°s, keres√©s (min. 10 minta a bemutat√°shoz).
	‚Ä¢	OCR pipeline (HU): t√∂meges feldolgoz√°s, manu√°lis korrekci√≥ UI, min≈ës√©gjelent√©s.
	‚Ä¢	V√°ltozatkezel√©s & napl√≥z√°s (ki n√©zte/let√∂lt√∂tte/m√≥dos√≠totta).  Ôøº
	‚Ä¢	Jogosults√°g-kezel√©s (minimum felhaszn√°l√≥/admin), szerepk√∂r-alap√∫ irathozz√°f√©r√©s.  Ôøº
	‚Ä¢	Biztons√°gi ment√©s & vissza√°ll√≠t√°s, incidensnapl√≥ √©s bejelent√©s.  Ôøº

C) Logisztika / Rakt√°r (alap)

Purpose: alap cikk-/k√©szletkezel√©s a CRM √©s sz√°mlafolyamatokhoz.
Key features (pick essentials now, keep others as toggles):
	‚Ä¢	Cikkt√∂rzs (azonos√≠t√≥, n√©v, tulajdons√°gok, cikkcsoport, beszerz√©si adatok).  Ôøº
	‚Ä¢	Cikkcsoportos√≠t√°s, t√∂bb rakt√°r, k√©szletek rakt√°rank√©nt.  Ôøº
	‚Ä¢	K√©szletszint figyel√©s (min/max + automatikus figyelmeztet√©s).  Ôøº
	‚Ä¢	Sarzs/gy√°rt√°si sz√°m kezel√©se (nyomonk√∂vethet≈ës√©g).  Ôøº
	‚Ä¢	√Årlista kezel√©s (sz√°ll√≠t√≥nk√©nt elt√©r≈ë √°r; import XLS/CSV/XML/TXT).  Ôøº
	‚Ä¢	Beszerz√©si l√°nc nyomon k√∂vet√©se (Rendel√©s‚ÜíSz√°ll√≠t√°s‚ÜíSz√°ml√°z√°s).  Ôøº
	‚Ä¢	Lelt√°roz√°s (lelt√°r√≠v, korrekci√≥k, hi√°ny/t√∂bblet).  Ôøº

D) P√©nz√ºgy integr√°ci√≥ (alap interf√©szek)
	‚Ä¢	Kimen≈ë/bemen≈ë sz√°mla meta-adatok √°tad√°sa; Online Sz√°mla API el≈ëk√©sz√≠t√©s; vev≈ë/sz√°ll√≠t√≥ analitika export; f≈ëk√∂nyvi/√ÅFA riport export (CSV/XML) ‚Äî min. export k√∂vetelm√©nyek a kontroll/kimutat√°sokhoz. (√Åltal√°nos p√©nz√ºgyi megfelel√©s + besz√°mol√≥k a p√©nz√ºgyi modul k√∂vetelm√©nyei szerint.)  Ôøº

E) T√°v- √©s csoportmunka (alap k√©pess√©gek)
	‚Ä¢	Biztons√°gos t√°voli el√©r√©s: HTTPS, 2FA lehet≈ës√©g.
	‚Ä¢	Val√≥sidej≈± √ºzenetk√ºld√©s (in-app chat/RTC) √©s feladat st√°tuszk√∂vet√©s; min. 80% usernek saj√°t hozz√°f√©r√©s.
	‚Ä¢	Osztott inform√°ci√≥s b√°zis (hierarchikus tud√°sb√°zis, mobilr√≥l is el√©rhet≈ë).  Ôøº
	‚Ä¢	Pap√≠ralap√∫ dokumentumok elektronikusan kezelhet≈ëk/t√°rolhat√≥k/archiv√°lhat√≥k.  Ôøº

4) Future Modules (scaffold now, implement later)
	‚Ä¢	HR & b√©r (skeleton): dolgoz√≥i alapadatok, munkak√∂r nyilv√°ntart√°s, szerz≈ëd√©s-verzi√≥z√°s; NAV/KSH riport export hely.  Ôøº
	‚Ä¢	Kontrolling/BI (skeleton): adatkapcsolatok, tervezett KPI-k, el≈ëre-defini√°lt & ad-hoc lek√©rdez√©sek, export (XLS/CSV/XML).  Ôøº
	‚Ä¢	Gy√°rt√°s (skeleton): gy√°rt√°si rendel√©s entit√°s, √ºtemez√©si helyek, hullad√©k/selejt kimutat√°sok placeholder.  Ôøº
	‚Ä¢	Web√°ruh√°z (skeleton): term√©kkatal√≥gus, kos√°r, sz√°ll√≠t√°si/fizet√©si m√≥dok param√©terez√©se, √°llapot √©rtes√≠t√©sek, k√©szlet interf√©sz, HTTPS k√∂telez≈ë tranzakci√≥s szakaszokban.
	‚Ä¢	Online marketing (skeleton): √ºgyf√©ladat bet√∂lt√©s/√∂sszek√∂t√©s, profiloz√°s/szegment√°l√°s, m√©r≈ëfel√ºletek. (L√°sd online marketing mell√©klet.)  Ôøº

5) Data Model (initial)

Create Prisma schemas for:
	‚Ä¢	User, Role, Permission, Session, AuditLog
	‚Ä¢	Account(Partner), Contact, Campaign, Lead, Opportunity, Quote, Order, InvoiceStub
	‚Ä¢	Item, ItemGroup, Warehouse, StockLot (sarzs/gy√°rt√°si), StockMove, PriceList, Supplier
	‚Ä¢	Case/Ticket, Message, Task, WorkflowStep
	‚Ä¢	Document, DocumentVersion, OCRJob, Tag, Filing (iktat√°s), RegistryEntry
	‚Ä¢	ReportJob, ExportJob, BackupJob

6) API & UI ‚Äì High-Level Requirements

Cross-module UX
	‚Ä¢	Global search (√ºgyf√©l, irat, cikk, rendel√©s, sz√°mla meta).
	‚Ä¢	Notifications & reminders (emails/SMS hooks prepared).
	‚Ä¢	Hungarian date/time/number formatting across app; CSV exports use semicolon by default for HU locale.
	‚Ä¢	Every mutating action is auditable (who/when/what, before/after snapshot).  Ôøº

CRM UI
	‚Ä¢	Pipeline t√°bl√°k, √ºgyf√©l 360¬∫ n√©zet (kapcsolatok, dokumentumok, reklam√°ci√≥k, aj√°nlatok).
	‚Ä¢	Kedvezm√©nyrendszer be√°ll√≠t√°s UI (mennyis√©gi/egyedi/√©rt√©khat√°r/id≈ëszaki).  Ôøº
	‚Ä¢	Kamp√°nyszegmens √©p√≠t≈ë + export.

DMS / Iratkezel√©s UI
	‚Ä¢	Be√©rkeztet√©s/iktat√°s var√°zsl√≥, t√©tel meta + vonalk√≥d/QR t√°mogat√°s.  Ôøº
	‚Ä¢	OCR munkasor: st√°tuszok (be√©rkezett ‚Üí OCR ‚Üí ellen≈ërz√©s ‚Üí k√©sz), karakterpontos szerkeszt≈ë.
	‚Ä¢	Verzi√≥lista + ki/behivatkoz√°sok, szerepk√∂r-alap√∫ hozz√°f√©r√©s.

Logisztika UI
	‚Ä¢	Cikkt√∂rzs √©s √°rlista kezel≈ë (multi supplier), rakt√°rn√©zetek, min/max riaszt√°s.
	‚Ä¢	Sarzs/gy√°rt√°si sz√°m √©let√∫t.  Ôøº
	‚Ä¢	Beszerz√©si l√°nc: rendel√©s ‚Üí be√©rkeztet√©s ‚Üí sz√°ml√°z√°s (meta).  Ôøº

7) Security, Roles & Logging
	‚Ä¢	Roles: User (saj√°t √ºgyf√©l/irat hozz√°f√©r√©sek), PowerUser (osztott er≈ëforr√°sok), Admin (konfigur√°ci√≥), Auditor (read-only + export).
	‚Ä¢	RBAC enforcement on backend & UI route guards.  Ôøº
	‚Ä¢	Audit trail for: login, permission changes, CRUD on CRM, DMS, logisztika, kedvezm√©nyek, √°rlist√°k, k√©szletmozg√°s.  Ôøº

8) Backups, √úzletfolytonoss√°g (√úBT) & Remote
	‚Ä¢	Encrypted scheduled backups (DB + files), restore wizard.
	‚Ä¢	HTTPS with valid cert for any remote UI; optional 2FA. Provide remote access demo flow.  Ôøº
	‚Ä¢	Incidens bejelent√©s fel√ºlet √©s hibanapl√≥ megtekint√©s.  Ôøº
	‚Ä¢	Availability target ‚â•96% (simple uptime monitor + status page).  Ôøº

9) Deliverables Checklist (what you must generate)
	1.	Monorepo with packages: apps/web, apps/desktop, apps/server, packages/ui, packages/config, packages/types.
	2.	Database schema (Prisma) + seeders with Hungarian sample data (√ºgyfelek, cikkek, rakt√°rak, iktatott iratok, √°rlist√°k).
	3.	API reference (OpenAPI) in Hungarian comments for business terms.
	4.	Installer artifacts: Windows MSI, macOS DMG, Linux AppImage; plus /dist-pwa build.
	5.	Operations bundle (docs folder):
	‚Ä¢	Telep√≠t√©si_√©s_√ºzemeltet≈ëi_k√©zik√∂nyv.md
	‚Ä¢	Felhaszn√°l√≥i_k√©zik√∂nyv.md (HU screenshots)
	‚Ä¢	E-learning_v√°zlat.md (modulonk√©nti 5‚Äì8 lecke)
	‚Ä¢	T√°mogat√°si_szerz≈ëd√©s_sablon.md (SLA ‚â•96%, ticketing folyamat)
	‚Ä¢	Verzi√≥kezel√©si_√©s_karbantart√°si_strat√©gia.md
	‚Ä¢	Adatkezel√©si_t√°j√©koztat√≥_GDPR.md (HU)
	‚Ä¢	IT_biztons√°gi_szab√°lyzat_kivonat.md + DRP_√∂sszefoglal√≥.md
(These satisfy dokument√°lts√°g, fenntarthat√≥s√°g/t√°mogat√°s, t√∂rv√©nyi megfelel≈ës√©g, adatment√©s/√úBT requirements.)  Ôøº
	6.	Acceptance test scripts mapped to each GINOP point we implement (see section 10).

10) Acceptance Criteria (GINOP traceability samples)
	‚Ä¢	Dokument√°lts√°g: provide the above manuals/e-learning, version-matched to the shipped build.  Ôøº
	‚Ä¢	Jogosults√°g-kezel√©s: verify min. two roles show different UI & rights.  Ôøº
	‚Ä¢	Integr√°ci√≥: same √ºgyf√©l-t√∂rzs visible across CRM & DMS; edit in one reflects in the other.  Ôøº
	‚Ä¢	Napl√≥z√°s: show run-time and archived logs for a full business year.  Ôøº
	‚Ä¢	T√°voli el√©r√©s: perform a remote transaction through the UI.  Ôøº
	‚Ä¢	Hibabejelent√©s: open in-app issue form and record case.  Ôøº
	‚Ä¢	Magyar UI: end-to-end HU interface verified.  Ôøº
	‚Ä¢	T√°v-/csoportmunka: chat present + 80% users have accounts; shared knowledge base reachable from mobile.  Ôøº
	‚Ä¢	Logisztika mint√°k:
	‚Ä¢	Create 10 cikkt√∂rzs entries; set min/max and trigger alerts.  Ôøº
	‚Ä¢	Show sarzs/gy√°rt√°si tracking on a chosen item.  Ôøº
	‚Ä¢	Import √°rlista variants from CSV; show two supplier prices.  Ôøº
	‚Ä¢	Run beszerz√©si l√°nc with reused data.  Ôøº
	‚Ä¢	DMS/iratkezel√©s mint√°k:
	‚Ä¢	Ingest 10 scanned docs ‚Üí OCR (HU) ‚Üí iktat√°s ‚Üí kereshet≈ë archiv.  Ôøº
	‚Ä¢	Show iktat√°si lifecycle and access controls.  Ôøº

11) What to do now (Agent instructions)
	1.	Scaffold the monorepo and all packages with the stack above.
	2.	Implement MVP features for CRM, DMS/OCR, Logisztika as specified; add toggles/feature flags for future modules.
	3.	Seed with realistic Hungarian demo data.
	4.	Generate all documentation files (HU) in /docs with screenshots wired into the built UI.
	5.	Produce installers (MSI/DMG/AppImage) and a PWA build; output paths clearly.
	6.	Run automated acceptance scripts that demonstrate each criterion in ¬ß10 and export a short Megval√≥sul√°si jelent√©s markdown summarizing evidence (screens, logs, exports).

‚∏ª
