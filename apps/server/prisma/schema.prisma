generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id                String         @id @default(uuid())
  email             String         @unique
  password          String
  nev               String
  aktiv             Boolean        @default(true)
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  roles             UserRole[]
  sessions          Session[]
  auditLogs         AuditLog[]
  ownedAccounts     Account[]      @relation("AccountOwner")
  assignedTasks     Task[]
  createdCampaigns  Campaign[]
  createdLeads      Lead[]
  createdTickets    Ticket[]
  createdDocuments  Document[]
  documentAccess    DocumentAccess[]

  @@map("felhasznalok")
}

model Role {
  id          String           @id @default(uuid())
  nev         String           @unique
  leiras      String?
  permissions String
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
  users       UserRole[]
  rolePermissions RolePermission[]

  @@map("szerepkorok")
}

model Permission {
  id        String           @id @default(uuid())
  kod       String           @unique
  nev       String
  modulo    String
  leiras    String?
  createdAt DateTime         @default(now())
  roles     RolePermission[]

  @@index([modulo])
  @@map("jogosultsagok")
}

model RolePermission {
  id           String     @id @default(uuid())
  roleId       String
  permissionId String
  createdAt    DateTime   @default(now())
  role         Role       @relation(fields: [roleId], references: [id], onDelete: Cascade)
  permission   Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)

  @@unique([roleId, permissionId])
  @@map("szerepkor_jogosultsagok")
}

model UserRole {
  id        String   @id @default(uuid())
  userId    String
  roleId    String
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  role      Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@unique([userId, roleId])
  @@map("felhasznalo_szerepkorok")
}

model Session {
  id        String   @id @default(uuid())
  userId    String
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

model AuditLog {
  id             String   @id @default(uuid())
  userId         String?
  esemeny        String
  entitas        String
  entitasId      String?
  regi           String?
  uj             String?
  ipCim          String?
  userAgent      String?
  createdAt      DateTime @default(now())
  user           User?    @relation(fields: [userId], references: [id], onDelete: SetNull)

  @@index([entitas, entitasId])
  @@index([userId])
  @@index([createdAt])
  @@map("audit_naplo")
}

model Account {
  id                  String        @id @default(uuid())
  azonosito           String        @unique
  nev                 String
  tipus               String
  adoszam             String?
  cim                 String?
  email               String?
  telefon             String?
  megjegyzesek        String?
  aktiv               Boolean       @default(true)
  createdAt           DateTime      @default(now())
  updatedAt           DateTime      @updatedAt
  ownerId             String?
  owner               User?         @relation("AccountOwner", fields: [ownerId], references: [id], onDelete: SetNull)
  contacts            Contact[]
  campaigns           CampaignAccount[]
  leads               Lead[]
  opportunities       Opportunity[]
  quotes              Quote[]
  orders              Order[]
  invoiceStubs        InvoiceStub[]
  tickets             Ticket[]
  documents           Document[]
  customFields        AccountCustomField[]

  @@index([ownerId])
  @@map("ugyfelek")
}

model AccountCustomField {
  id        String   @id @default(uuid())
  accountId String
  kulcs     String
  ertek     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  account   Account  @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@unique([accountId, kulcs])
  @@map("ugyfel_egyedi_mezo")
}

model Contact {
  id           String   @id @default(uuid())
  accountId    String
  nev          String
  email        String?
  telefon      String?
  pozicio      String?
  elsodleges   Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  account      Account  @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@index([accountId])
  @@map("kapcsolattartok")
}

model Campaign {
  id                String            @id @default(uuid())
  nev               String
  leiras            String?
  tipus             String
  allapot           String
  kezdetDatum       DateTime
  befejezesDatum    DateTime?
  koltsegvetes      Float?
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  createdById       String?
  createdBy         User?             @relation(fields: [createdById], references: [id], onDelete: SetNull)
  accounts          CampaignAccount[]
  leads             Lead[]

  @@index([createdById])
  @@map("kampanyok")
}

model CampaignAccount {
  id         String   @id @default(uuid())
  campaignId String
  accountId  String
  visszajelzes String?
  createdAt  DateTime @default(now())
  campaign   Campaign @relation(fields: [campaignId], references: [id], onDelete: Cascade)
  account    Account  @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@unique([campaignId, accountId])
  @@map("kampany_ugyfel")
}

model Lead {
  id           String       @id @default(uuid())
  accountId    String?
  campaignId   String?
  forras       String
  allapot      String
  minositesScore Int?
  megjegyzesek String?
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  createdById  String?
  account      Account?     @relation(fields: [accountId], references: [id], onDelete: SetNull)
  campaign     Campaign?    @relation(fields: [campaignId], references: [id], onDelete: SetNull)
  createdBy    User?        @relation(fields: [createdById], references: [id], onDelete: SetNull)
  opportunity  Opportunity?

  @@index([accountId])
  @@index([campaignId])
  @@map("leadek")
}

model Opportunity {
  id              String     @id @default(uuid())
  accountId       String
  leadId          String?    @unique
  nev             String
  szakasz         String
  ertek           Float
  valoszinuseg    Int
  zarvasDatum     DateTime?
  lezartDatum     DateTime?
  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt
  account         Account    @relation(fields: [accountId], references: [id], onDelete: Cascade)
  lead            Lead?      @relation(fields: [leadId], references: [id], onDelete: SetNull)
  quotes          Quote[]
  documents       Document[]

  @@index([accountId])
  @@map("lehetosegek")
}

model Quote {
  id               String       @id @default(uuid())
  accountId        String
  opportunityId    String?
  azonosito        String       @unique
  ervenyessegDatum DateTime
  osszeg           Float
  afa              Float
  vegosszeg        Float
  allapot          String
  megjegyzesek     String?
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
  account          Account      @relation(fields: [accountId], references: [id], onDelete: Cascade)
  opportunity      Opportunity? @relation(fields: [opportunityId], references: [id], onDelete: SetNull)
  items            QuoteItem[]
  discounts        Discount[]
  documents        Document[]
  order            Order?

  @@index([accountId])
  @@index([opportunityId])
  @@map("ajanlatok")
}

model QuoteItem {
  id          String   @id @default(uuid())
  quoteId     String
  itemId      String
  mennyiseg   Float
  egysegAr    Float
  kedvezmeny  Float    @default(0)
  osszeg      Float
  createdAt   DateTime @default(now())
  quote       Quote    @relation(fields: [quoteId], references: [id], onDelete: Cascade)
  item        Item     @relation(fields: [itemId], references: [id])

  @@map("ajanlat_tetelek")
}

model Discount {
  id              String    @id @default(uuid())
  quoteId         String?
  orderId         String?
  tipus           String
  ertek           Float
  mennyisegiHatar Float?
  ertekHatar      Float?
  kezdetDatum     DateTime?
  vegesDatum      DateTime?
  leiras          String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  quote           Quote?    @relation(fields: [quoteId], references: [id], onDelete: Cascade)
  order           Order?    @relation(fields: [orderId], references: [id], onDelete: Cascade)

  @@map("kedvezmenyek")
}

model Order {
  id               String        @id @default(uuid())
  accountId        String
  quoteId          String?       @unique
  azonosito        String        @unique
  rendelesiDatum   DateTime      @default(now())
  szallitasiDatum  DateTime?
  teljesitesiDatum DateTime?
  osszeg           Float
  afa              Float
  vegosszeg        Float
  allapot          String
  megjegyzesek     String?
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt
  account          Account       @relation(fields: [accountId], references: [id], onDelete: Cascade)
  quote            Quote?        @relation(fields: [quoteId], references: [id], onDelete: SetNull)
  items            OrderItem[]
  discounts        Discount[]
  invoiceStub      InvoiceStub?
  shipments        Shipment[]

  @@index([accountId])
  @@map("rendelesek")
}

model OrderItem {
  id          String   @id @default(uuid())
  orderId     String
  itemId      String
  mennyiseg   Float
  egysegAr    Float
  kedvezmeny  Float    @default(0)
  osszeg      Float
  createdAt   DateTime @default(now())
  order       Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
  item        Item     @relation(fields: [itemId], references: [id])

  @@map("rendeles_tetelek")
}

model Shipment {
  id              String         @id @default(uuid())
  orderId         String
  szallitasiCim   String
  szallitasiMod   String
  szallitasiDatum DateTime?
  allapot         String
  megjegyzesek    String?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  order           Order          @relation(fields: [orderId], references: [id], onDelete: Cascade)
  deliveryNotes   DeliveryNote[]

  @@index([orderId])
  @@map("szallitasok")
}

model InvoiceStub {
  id                String   @id @default(uuid())
  accountId         String
  orderId           String?  @unique
  szamlaSzam        String   @unique
  kiallitasDatum    DateTime @default(now())
  teljesitesDatum   DateTime
  fizetesiHataridoDatum DateTime
  osszeg            Float
  afa               Float
  vegosszeg         Float
  tipus             String
  allapot           String
  megjegyzesek      String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  account           Account  @relation(fields: [accountId], references: [id], onDelete: Cascade)
  order             Order?   @relation(fields: [orderId], references: [id], onDelete: SetNull)

  @@index([accountId])
  @@map("szamla_meta")
}

model Item {
  id                   String              @id @default(uuid())
  azonosito            String              @unique
  nev                  String
  leiras               String?
  itemGroupId          String?
  egyseg               String
  beszerzesiAr         Float
  eladasiAr            Float
  afaKulcs             Float
  aktiv                Boolean             @default(true)
  beszerzesiAdatok     String?
  suly                 Float?
  mertekEgyseg         String?
  vonalkod             String?
  createdAt            DateTime            @default(now())
  updatedAt            DateTime            @updatedAt
  itemGroup            ItemGroup?          @relation(fields: [itemGroupId], references: [id], onDelete: SetNull)
  quoteItems           QuoteItem[]
  orderItems           OrderItem[]
  stockLots            StockLot[]
  stockMoves           StockMove[]
  stockLevels          StockLevel[]
  priceLists           PriceListItem[]
  purchaseOrderItems   PurchaseOrderItem[]

  @@index([itemGroupId])
  @@map("cikkek")
}

model ItemGroup {
  id        String   @id @default(uuid())
  nev       String   @unique
  leiras    String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  items     Item[]

  @@map("cikkcsoportok")
}

model Warehouse {
  id          String              @id @default(uuid())
  azonosito   String              @unique
  nev         String
  cim         String?
  aktiv       Boolean             @default(true)
  createdAt   DateTime            @default(now())
  updatedAt   DateTime            @updatedAt
  locations   WarehouseLocation[]
  stockLots   StockLot[]
  stockMoves  StockMove[]
  stockLevels StockLevel[]

  @@map("raktarak")
}

model WarehouseLocation {
  id          String       @id @default(uuid())
  warehouseId String
  azonosito   String
  nev         String
  zona        String?
  folyoso     String?
  polc        String?
  tipus       String?
  aktiv       Boolean      @default(true)
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  warehouse   Warehouse    @relation(fields: [warehouseId], references: [id], onDelete: Cascade)
  stockLevels StockLevel[]

  @@unique([warehouseId, azonosito])
  @@index([warehouseId])
  @@map("raktari_helyek")
}

model StockLevel {
  id         String             @id @default(uuid())
  itemId     String
  warehouseId String
  locationId String?
  mennyiseg  Float              @default(0)
  minimum    Float?
  maximum    Float?
  createdAt  DateTime           @default(now())
  updatedAt  DateTime           @updatedAt
  item       Item               @relation(fields: [itemId], references: [id])
  warehouse  Warehouse          @relation(fields: [warehouseId], references: [id], onDelete: Cascade)
  location   WarehouseLocation? @relation(fields: [locationId], references: [id], onDelete: SetNull)

  @@unique([itemId, warehouseId, locationId])
  @@index([itemId])
  @@index([warehouseId])
  @@map("keszletszintek")
}

model StockLot {
  id                  String       @id @default(uuid())
  itemId              String
  warehouseId         String
  sarzsGyartasiSzam   String?
  mennyiseg           Float
  minKeszlet          Float        @default(0)
  maxKeszlet          Float?
  lejarat             DateTime?
  createdAt           DateTime     @default(now())
  updatedAt           DateTime     @updatedAt
  item                Item         @relation(fields: [itemId], references: [id], onDelete: Cascade)
  warehouse           Warehouse    @relation(fields: [warehouseId], references: [id], onDelete: Cascade)

  @@index([itemId, warehouseId])
  @@index([sarzsGyartasiSzam])
  @@map("keszlet_tetelek")
}

model StockMove {
  id            String    @id @default(uuid())
  itemId        String
  warehouseId   String
  tipus         String
  mennyiseg     Float
  referenciaId  String?
  megjegyzesek  String?
  createdAt     DateTime  @default(now())
  item          Item      @relation(fields: [itemId], references: [id])
  warehouse     Warehouse @relation(fields: [warehouseId], references: [id])

  @@index([itemId])
  @@index([warehouseId])
  @@index([createdAt])
  @@map("keszlet_mozgasok")
}

model Supplier {
  id              String          @id @default(uuid())
  nev             String
  adoszam         String?
  cim             String?
  email           String?
  telefon         String?
  aktiv           Boolean         @default(true)
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt
  priceLists      PriceList[]
  purchaseOrders  PurchaseOrder[]

  @@map("szallitok")
}

model PriceList {
  id           String          @id @default(uuid())
  supplierId   String
  nev          String
  ervenyessegKezdet DateTime
  ervenyessegVeg    DateTime?
  aktiv        Boolean         @default(true)
  createdAt    DateTime        @default(now())
  updatedAt    DateTime        @updatedAt
  supplier     Supplier        @relation(fields: [supplierId], references: [id], onDelete: Cascade)
  items        PriceListItem[]

  @@index([supplierId])
  @@map("arlistak")
}

model PriceListItem {
  id          String    @id @default(uuid())
  priceListId String
  itemId      String
  ar          Float
  valuta      String    @default("HUF")
  createdAt   DateTime  @default(now())
  priceList   PriceList @relation(fields: [priceListId], references: [id], onDelete: Cascade)
  item        Item      @relation(fields: [itemId], references: [id], onDelete: Cascade)

  @@unique([priceListId, itemId])
  @@map("arlista_tetelek")
}

model Ticket {
  id             String         @id @default(uuid())
  accountId      String?
  azonosito      String         @unique
  targy          String
  leiras         String
  tipus          String
  prioritas      String
  allapot        String
  eszkalalva     Boolean        @default(false)
  megnyitasDatum DateTime       @default(now())
  lezarasDatum   DateTime?
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
  createdById    String?
  assignedToId   String?
  account        Account?       @relation(fields: [accountId], references: [id], onDelete: SetNull)
  createdBy      User?          @relation(fields: [createdById], references: [id], onDelete: SetNull)
  messages       Message[]

  @@index([accountId])
  @@index([allapot])
  @@map("ticketek")
}

model Message {
  id        String   @id @default(uuid())
  ticketId  String?
  felhaszCsak String?
  targy     String?
  szoveg    String
  tipus     String
  createdAt DateTime @default(now())
  ticket    Ticket?  @relation(fields: [ticketId], references: [id], onDelete: Cascade)

  @@index([ticketId])
  @@map("uzenetek")
}

model Task {
  id             String    @id @default(uuid())
  cim            String
  leiras         String?
  allapot        String
  prioritas      String
  hataridoDatum  DateTime?
  assignedToId   String?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  assignedTo     User?     @relation(fields: [assignedToId], references: [id], onDelete: SetNull)

  @@index([assignedToId])
  @@index([allapot])
  @@map("feladatok")
}

model DocumentCategory {
  id        String     @id @default(uuid())
  nev       String     @unique
  leiras    String?
  szulo     String?
  aktiv     Boolean    @default(true)
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  documents Document[]

  @@map("dokumentum_kategoriak")
}

model DocumentType {
  id               String     @id @default(uuid())
  nev              String     @unique
  leiras           String?
  kotelezo         Boolean    @default(false)
  ervenyessegKell  Boolean    @default(false)
  jovalagasKell    Boolean    @default(false)
  aktiv            Boolean    @default(true)
  createdAt        DateTime   @default(now())
  updatedAt        DateTime   @updatedAt
  documents        Document[]

  @@map("dokumentum_tipusok")
}

model Document {
  id                String              @id @default(uuid())
  accountId         String?
  categoryId        String?
  typeId            String?
  opportunityId     String?
  quoteId           String?
  iktatoSzam        String?             @unique
  nev               String
  tipus             String
  fajlNev           String
  fajlMeret         Int
  fajlUtvonal       String
  mimeType          String
  tartalom          String?
  allapot           String
  ervenyessegKezdet DateTime?
  ervenyessegVeg    DateTime?
  lejarat           DateTime?
  felelos           String?
  megjegyzesek      String?
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  createdById       String?
  account           Account?            @relation(fields: [accountId], references: [id], onDelete: SetNull)
  category          DocumentCategory?   @relation(fields: [categoryId], references: [id], onDelete: SetNull)
  type              DocumentType?       @relation(fields: [typeId], references: [id], onDelete: SetNull)
  opportunity       Opportunity?        @relation(fields: [opportunityId], references: [id], onDelete: SetNull)
  quote             Quote?              @relation(fields: [quoteId], references: [id], onDelete: SetNull)
  createdBy         User?               @relation(fields: [createdById], references: [id], onDelete: SetNull)
  versions          DocumentVersion[]
  workflowLogs      DocumentWorkflowLog[]
  ocrJob            OCRJob?
  tags              DocumentTag[]
  access            DocumentAccess[]

  @@index([accountId])
  @@index([categoryId])
  @@index([typeId])
  @@index([iktatoSzam])
  @@index([tipus])
  @@index([allapot])
  @@map("dokumentumok")
}

model DocumentVersion {
  id           String   @id @default(uuid())
  documentId   String
  verzioSzam   Int
  fajlUtvonal  String
  valtoztatasLeiras String?
  createdAt    DateTime @default(now())
  createdById  String?
  document     Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  @@index([documentId])
  @@map("dokumentum_verziok")
}

model DocumentAccess {
  id         String   @id @default(uuid())
  documentId String
  userId     String
  jogosultsag String
  createdAt  DateTime @default(now())
  document   Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([documentId, userId])
  @@map("dokumentum_jogosultsagok")
}

model DocumentWorkflowLog {
  id            String   @id @default(uuid())
  documentId    String
  regiAllapot   String
  ujAllapot     String
  megjegyzes    String?
  userId        String?
  createdAt     DateTime @default(now())
  document      Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  @@index([documentId])
  @@map("dokumentum_workflow_naplo")
}

model OCRJob {
  id            String    @id @default(uuid())
  documentId    String    @unique
  allapot       String
  eredmeny      String?
  pontossag     Float?
  nyelv         String    @default("hun")
  hibalista     String?
  feldolgozasKezdet DateTime?
  feldolgozasVeg    DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  document      Document  @relation(fields: [documentId], references: [id], onDelete: Cascade)

  @@index([allapot])
  @@map("ocr_feladatok")
}

model Tag {
  id        String        @id @default(uuid())
  nev       String        @unique
  szin      String?
  createdAt DateTime      @default(now())
  documents DocumentTag[]

  @@map("cimkek")
}

model DocumentTag {
  id         String   @id @default(uuid())
  documentId String
  tagId      String
  createdAt  DateTime @default(now())
  document   Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  tag        Tag      @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([documentId, tagId])
  @@map("dokumentum_cimkek")
}

model BackupJob {
  id             String    @id @default(uuid())
  tipus          String
  allapot        String
  fajlUtvonal    String?
  fajlNev        String?
  meret          Int?
  hibaUzenet     String?
  tartalomManifeszt String?
  jellel         Boolean   @default(false)
  inditas        DateTime  @default(now())
  befejezes      DateTime?
  createdAt      DateTime  @default(now())

  @@index([allapot])
  @@index([inditas])
  @@map("biztonsagi_mentest")
}

model SystemSetting {
  id        String   @id @default(uuid())
  kulcs     String   @unique
  ertek     String
  tipus     String
  kategoria String
  leiras    String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([kategoria])
  @@map("rendszer_beallitasok")
}

model ReportJob {
  id          String    @id @default(uuid())
  nev         String
  tipus       String
  parameterek String?
  allapot     String
  eredmeny    String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("riport_feladatok")
}

model ExportJob {
  id          String    @id @default(uuid())
  tipus       String
  formatum    String
  parameterek String?
  allapot     String
  fajlUtvonal String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("export_feladatok")
}

model KnowledgeBase {
  id        String   @id @default(uuid())
  cim       String
  tartalom  String
  kategoria String
  szulo     String?
  aktiv     Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([kategoria])
  @@map("tudasbazis")
}

model PurchaseOrder {
  id                String              @id @default(uuid())
  supplierId        String
  azonosito         String              @unique
  rendelesiDatum    DateTime            @default(now())
  szallitasiDatum   DateTime?
  osszeg            Float
  afa               Float
  vegosszeg         Float
  allapot           String
  megjegyzesek      String?
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  supplier          Supplier            @relation(fields: [supplierId], references: [id], onDelete: Cascade)
  items             PurchaseOrderItem[]
  deliveryNotes     DeliveryNote[]

  @@index([supplierId])
  @@index([allapot])
  @@map("beszerzesi_rendelesek")
}

model PurchaseOrderItem {
  id               String        @id @default(uuid())
  purchaseOrderId  String
  itemId           String
  mennyiseg        Float
  egysegAr         Float
  osszeg           Float
  createdAt        DateTime      @default(now())
  purchaseOrder    PurchaseOrder @relation(fields: [purchaseOrderId], references: [id], onDelete: Cascade)
  item             Item          @relation(fields: [itemId], references: [id])

  @@index([purchaseOrderId])
  @@map("beszerzesi_rendeles_tetelek")
}

model DeliveryNote {
  id                String         @id @default(uuid())
  purchaseOrderId   String?
  shipmentId        String?
  azonosito         String         @unique
  tipus             String
  kiallitasDatum    DateTime       @default(now())
  szallitasiDatum   DateTime?
  feladoCim         String?
  cimzettCim        String?
  megjegyzesek      String?
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  purchaseOrder     PurchaseOrder? @relation(fields: [purchaseOrderId], references: [id], onDelete: SetNull)
  shipment          Shipment?      @relation(fields: [shipmentId], references: [id], onDelete: SetNull)

  @@index([purchaseOrderId])
  @@index([shipmentId])
  @@map("szallitolevelek")
}
